# Ruff configuration for CLI application - Relaxed settings
target-version = "py310"
line-length = 120
indent-width = 4

[lint]
# Enable essential rule sets + type checking
select = [
    "E",      # pycodestyle errors (basic syntax issues)
    "W",      # pycodestyle warnings (basic style issues)
    "F",      # Pyflakes (unused imports, undefined names)
    "I",      # isort (import sorting)
    "ANN",    # flake8-annotations (type checking)
    "UP",     # pyupgrade (modern Python syntax)
    "B",      # flake8-bugbear (likely bugs)
    "C4",     # flake8-comprehensions (better comprehensions)
    # Removed most strict rules that conflict with formatter or are too pedantic
]

# Ignore rules that are too strict, conflict with formatter, or are pedantic
ignore = [
    # All docstring rules - too pedantic for CLI development
    "D",      # All pydocstring rules

    # Formatter conflicts - let formatter handle these
    "COM812", # Trailing comma missing
    "COM819", # Trailing comma prohibited
    "ISC001", # Implicitly concatenated string literals
    "Q000",   # Single quotes
    "Q001",   # Single quotes
    "Q002",   # Single quotes
    "Q003",   # Single quotes
    "E501",   # Line too long

    # CLI app specific - these are normal in CLI applications
    "S101",   # Use of assert
    "T20",    # Print statements (needed for CLI output)
    "T201",   # Print statements
    "T203",   # Print statements
    "FBT001", # Boolean positional args
    "FBT002", # Boolean default args
    "FBT003", # Boolean positional args

    # Too pedantic - these make development annoying
    "A001",   # Variable shadowing builtin
    "A002",   # Argument shadowing builtin
    "A003",   # Class attribute shadowing builtin
    "TRY003", # Long exception messages
    "EM101",  # String literal in exception
    "EM102",  # f-string in exception
    "F841",   # Unused variable (common during development)
    "RUF001", # Ambiguous unicode
    "RUF002", # Ambiguous unicode
    "RUF003", # Ambiguous unicode
    "RUF012", # Mutable class attributes
    "PTH123", # Use Path.open()
    "PTH118", # Use Path.joinpath()
    "PTH119", # Use Path.resolve()
    "PTH120", # Use Path.exists()

    # Type annotation rules - keep most but ignore the overly strict ones
    "ANN204", # Missing return type annotation for __init__
    "ANN401", # Dynamically typed expressions (Any) disallowed

    # TODO/FIXME rules - too pedantic during development
    "TD",     # All TODO rules
    "FIX",    # All FIXME rules

    # Complexity rules - too strict for CLI functions
    "PLR0913", # Too many arguments
    "PLR0912", # Too many branches
    "PLR0915", # Too many statements
    "PLR2004", # Magic value comparison
    "C901",   # Complex structure

    # Argument rules - too strict
    "ARG001", # Unused function argument
    "ARG002", # Unused method argument
    "ARG003", # Unused class method argument
    "ARG004", # Unused static method argument
    "ARG005", # Unused lambda argument

    # Other pedantic rules
    "B008",   # Function call in argument defaults
    "B006",   # Mutable argument defaults
    "SIM",    # All simplify rules (sometimes wrong)
    "ERA001", # Commented code (allow commented code)
    "N",      # All naming rules (too pedantic)
    "RET",    # All return rules (too pedantic)
    "TRY",    # All try/except rules (too strict)
]

# Allow fix for basic rules + type checking
fixable = ["E", "W", "F", "I", "UP", "C4"]
unfixable = ["ANN"]  # Don't auto-fix type annotations

# Allow unused variables when underscore-prefixed
dummy-variable-rgx = "^(_+|(_+[a-zA-Z0-9_]*[a-zA-Z0-9]+?))$"

[lint.per-file-ignores]
# Tests can be even more relaxed
"tests/**/*.py" = [
    "E",      # Allow all pycodestyle errors in tests
    "W",      # Allow all pycodestyle warnings in tests
    "F841",   # Allow unused variables in tests
]

# __init__.py files can be minimal
"__init__.py" = [
    "F401",   # Allow unused imports in __init__.py
]

[lint.isort]
# Simple import sorting
known-first-party = ["deltacat_cli"]
force-single-line = false
lines-after-imports = 2
split-on-trailing-comma = false  # Match formatter setting

[lint.pylint]
max-args = 30  # Very relaxed argument limit

[format]
# Formatter settings - let formatter handle most style
indent-style = "space"
quote-style = "single"
line-ending = "auto"
skip-magic-trailing-comma = true
docstring-code-format = true
docstring-code-line-length = "dynamic"
